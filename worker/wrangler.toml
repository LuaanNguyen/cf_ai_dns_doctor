name = "dns-doctor"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Durable Object binding
[[durable_objects.bindings]]
name = "DOMAIN_HISTORY"
class_name = "DomainHistory"
script_name = "dns-doctor"

# Durable Object migration (required for first deployment)
[[migrations]]
tag = "v1"
new_classes = ["DomainHistory"]

# Workers AI binding (for Llama 3.3)
[ai]
binding = "AI"

# Environment variables (can be set via wrangler secret put)
[vars]
# OPENAI_API_KEY can be set via: wrangler secret put OPENAI_API_KEY

# CORS configuration
[env.production]
routes = [
  { pattern = "dns-doctor.*.workers.dev", zone_name = "" }
]

